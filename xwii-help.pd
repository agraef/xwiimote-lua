#N canvas 385 86 865 709.062 10;
#X obj 349 403 cnv 15 128 71 empty empty Nunchuk 62 57 0 12 -233017
-1 0;
#X obj 42 30 tgl 15 0 empty empty empty 17 7 0 10 -258965 -1 -1 1 1
;
#X obj 42 50 xwii;
#X floatatom 42 116 5 0 0 0 - - -, f 5;
#X floatatom 99 116 5 0 0 0 - - -, f 5;
#X obj 269 20 tgl 15 0 empty empty empty 17 7 0 10 -64657 -1 -1 1 1
;
#X obj 269 40 metro 250;
#X obj 42 94 unpack f f;
#X obj 63 169 print devlist;
#X floatatom 38 196 5 0 0 0 - - -, f 5;
#X obj 38 217 t f f;
#X obj 38 239 & 256;
#X obj 38 283 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
256;
#X obj 65 261 & 512;
#X obj 65 283 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
512;
#X text 38 302 M+;
#X text 59 302 Nunchuk;
#X obj 88 50 r xwii;
#X obj 269 146 s xwii;
#X obj 63 146 route devlist info leds battery;
#X floatatom 120 197 5 0 0 0 - - -, f 5;
#X obj 120 284 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 141 284 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
2;
#X obj 120 240 & 1;
#X obj 141 262 & 2;
#X obj 120 218 t f f f f;
#X obj 163 284 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
4;
#X obj 184 284 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
8;
#X obj 163 240 & 4;
#X obj 184 262 & 8;
#X text 143 302 LEDs;
#X obj 177 169 hsl 64 15 0 100 0 0 empty empty empty -2 -8 0 10 -253834
-1 -1 0 1;
#X text 189 190 Battery;
#X text 40 5 Open/close device;
#X text 292 18 Poll accel/motion data;
#N canvas 994 355 450 323.031 choose 0;
#X obj 18 85 cnv 15 164 24 empty empty NC 146 10 0 12 -233017 -1 0
;
#X obj 82 87 tgl 15 0 empty empty joystick 17 7 0 10 -262144 -1 -1
0 1;
#X obj 22 87 tgl 15 0 empty empty accel 17 7 0 10 -262144 -1 -1 0 1
;
#X msg 22 177 accel;
#X msg 52 204 ncaccel;
#X msg 105 177 motionplus;
#X msg 135 204 ncstick;
#X obj 22 118 spigot;
#X obj 105 118 spigot;
#X obj 52 143 spigot;
#X obj 135 143 spigot;
#X obj 22 67 tgl 15 0 empty empty accel 17 7 0 10 -262144 -1 -1 0 1
;
#X obj 82 67 tgl 15 0 empty empty motion+ 17 7 0 10 -262144 -1 -1 1
1;
#X obj 21 15 inlet;
#X obj 21 37 t f f f f;
#X obj 70 245 outlet;
#X connect 1 0 10 1;
#X connect 2 0 9 1;
#X connect 3 0 15 0;
#X connect 4 0 15 0;
#X connect 5 0 15 0;
#X connect 6 0 15 0;
#X connect 7 0 3 0;
#X connect 8 0 5 0;
#X connect 9 0 4 0;
#X connect 10 0 6 0;
#X connect 11 0 7 1;
#X connect 12 0 8 1;
#X connect 13 0 14 0;
#X connect 14 0 7 0;
#X connect 14 1 9 0;
#X connect 14 2 8 0;
#X connect 14 3 10 0;
#X coords 0 -1 1 1 172 62 1 15 49;
#X restore 269 71 pd choose;
#X obj 246 334 route accel motionplus ncaccel ncstick;
#X obj 246 356 unpack f f f;
#X obj 302 377 unpack f f f;
#X obj 358 356 unpack f f f;
#X floatatom 246 408 0 0 0 0 x - -;
#X floatatom 246 429 0 0 0 0 y - -;
#X floatatom 246 450 0 0 0 0 z - -;
#X floatatom 302 408 0 0 0 0 x - -;
#X floatatom 302 429 0 0 0 0 y - -;
#X floatatom 302 450 0 0 0 0 z - -;
#X floatatom 358 408 0 0 0 0 x - -;
#X floatatom 358 429 0 0 0 0 y - -;
#X floatatom 358 450 0 0 0 0 z - -;
#X floatatom 414 408 0 0 0 0 x - -;
#X floatatom 414 429 0 0 0 0 y - -;
#X obj 414 377 unpack f f;
#X obj 511 371 bng 15 250 50 0 empty empty reset 17 7 0 10 -262144
-1 -1;
#X floatatom 511 420 0 0 0 0 x - x;
#X floatatom 511 441 0 0 0 0 y - y;
#X text 70 24 (click here first!);
#N canvas 2124 282 717 628.062 posxyz 0;
#X obj 26 15 inlet;
#X obj 86 243 accum;
#X obj 86 266 min 10000;
#X obj 86 310 outlet;
#X obj 153 243 accum;
#X obj 153 266 min 10000;
#X obj 153 310 outlet;
#X msg 26 59 0;
#X obj 86 288 max -10000;
#X obj 153 288 max -10000;
#X obj 85 213 t b f;
#X obj 152 213 t b f;
#X obj 143 111 / 500;
#X obj 186 111 / 500;
#X obj 143 133 int;
#X obj 186 133 int;
#X obj 143 89 unpack f f f;
#X obj 219 213 t b f;
#X obj 229 111 / 500;
#X obj 229 133 int;
#X obj 220 243 accum;
#X obj 220 266 min 10000;
#X obj 220 310 outlet;
#X obj 220 288 max -10000;
#X obj 26 37 route bang calibrate;
#X obj 26 81 t f f f;
#X obj 318 109 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 85 153 t f f;
#X obj 152 153 t f f;
#X obj 219 153 t f f;
#X obj 310 209 accum;
#X obj 351 209 accum;
#X obj 392 209 accum;
#X msg 318 149 0;
#X obj 143 63 t a b;
#X obj 318 171 t f f f f;
#X obj 416 50 f;
#X obj 446 50 + 1;
#X obj 416 72 == 10;
#X obj 416 94 sel 1;
#X floatatom 310 231 5 0 0 0 - - -, f 5;
#X floatatom 351 231 5 0 0 0 - - -, f 5;
#X floatatom 392 231 5 0 0 0 - - -, f 5;
#X obj 310 252 / 10;
#X obj 351 252 / 10;
#X obj 392 252 / 10;
#X text 298 80 auto calibration;
#X obj 310 274 int;
#X obj 351 274 int;
#X obj 392 274 int;
#X floatatom 310 296 5 0 0 0 - - -, f 5;
#X floatatom 351 296 5 0 0 0 - - -, f 5;
#X floatatom 392 296 5 0 0 0 - - -, f 5;
#X obj 85 175 -;
#X obj 152 175 -;
#X obj 219 175 -;
#X obj 416 116 t b b b b;
#X obj 318 129 t b b;
#X text 62 336 The Motion+ sensor delivers rather crappy data \, but
at least it lets us do some scaling \, rounding and accumulation to
get useful location data out of it \, if the device is properly calibrated
(which will be done automatically \, and by sending an explicit calibrate
message.;
#X connect 0 0 24 0;
#X connect 1 0 2 0;
#X connect 2 0 8 0;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 7 0 25 0;
#X connect 8 0 3 0;
#X connect 9 0 6 0;
#X connect 10 0 1 0;
#X connect 10 1 1 1;
#X connect 11 0 4 0;
#X connect 11 1 4 1;
#X connect 12 0 14 0;
#X connect 13 0 15 0;
#X connect 14 0 27 0;
#X connect 15 0 28 0;
#X connect 16 0 12 0;
#X connect 16 1 13 0;
#X connect 16 2 18 0;
#X connect 17 0 20 0;
#X connect 17 1 20 1;
#X connect 18 0 19 0;
#X connect 19 0 29 0;
#X connect 20 0 21 0;
#X connect 21 0 23 0;
#X connect 23 0 22 0;
#X connect 24 0 7 0;
#X connect 24 1 26 0;
#X connect 24 2 34 0;
#X connect 25 0 1 0;
#X connect 25 1 4 0;
#X connect 25 2 20 0;
#X connect 26 0 57 0;
#X connect 27 0 53 0;
#X connect 27 1 30 1;
#X connect 28 0 54 0;
#X connect 28 1 31 1;
#X connect 29 0 55 0;
#X connect 29 1 32 1;
#X connect 30 0 40 0;
#X connect 31 0 41 0;
#X connect 32 0 42 0;
#X connect 33 0 35 0;
#X connect 34 0 16 0;
#X connect 34 1 36 0;
#X connect 35 0 30 0;
#X connect 35 1 31 0;
#X connect 35 2 32 0;
#X connect 35 3 36 1;
#X connect 36 0 37 0;
#X connect 36 0 38 0;
#X connect 37 0 36 1;
#X connect 38 0 39 0;
#X connect 39 0 56 0;
#X connect 40 0 43 0;
#X connect 41 0 44 0;
#X connect 42 0 45 0;
#X connect 43 0 47 0;
#X connect 44 0 48 0;
#X connect 45 0 49 0;
#X connect 47 0 50 0;
#X connect 48 0 51 0;
#X connect 49 0 52 0;
#X connect 50 0 53 1;
#X connect 51 0 54 1;
#X connect 52 0 55 1;
#X connect 53 0 10 0;
#X connect 54 0 11 0;
#X connect 55 0 17 0;
#X connect 56 0 7 0;
#X connect 56 1 30 0;
#X connect 56 2 31 0;
#X connect 56 3 32 0;
#X connect 57 0 33 0;
#X connect 57 1 7 0;
#X restore 511 395 pd posxyz;
#X floatatom 511 462 0 0 0 0 z - z;
#X msg 511 345 calibrate;
#X obj 42 72 t a a;
#X text 143 116 button data;
#X obj 150 72 sel 1;
#X obj 511 323 r calibrate;
#X obj 150 94 bng 15 250 50 0 calibrate empty calibrate 17 7 0 10 -262144
-1 -1;
#X obj 150 50 route 4;
#X text 255 248 This is the raw acceleration/motion data which by itself
is rather useless \, so you probably need to process it in some way.
E.g. \, the posxyz subpatch on the right shows how to extract location
information as x y z coordinates from the Motion+ sensor., f 54;
#N canvas 606 152 770 574.062 more 0;
#X msg 72 198 info;
#X msg 18 198 devlist;
#X msg 108 198 leds;
#X msg 144 198 battery;
#X obj 18 224 s xwii;
#X text 21 35 The xwii object provides access to the Wiimote devices
connected to your computer. This patch demonstrates some of the available
functionality \, how to obtain data from the Wiimote itself and operate
its leds and rumble motor \, and read acceleration and joystick data
from a connected Nunchuk if available. Please also check the included
README for more information., f 80;
#X obj 252 261 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 252 281 metro 500;
#X obj 252 303 f;
#X obj 283 303 + 1;
#X obj 313 303 mod 16;
#X msg 252 325 leds \$1;
#X obj 20 279 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 20 299 rumble \$1;
#X obj 252 347 s xwii;
#X obj 20 321 s xwii;
#X text 249 223 LED light show (demonstrates how to operate the four
LEDs on the Wiimote), f 38;
#X text 85 300 arg is 0 or 1;
#X text 308 326 arg is the bitmask - hooking it up to a counter mod
16 like here will show all 4 bit patterns, f 29;
#X text 18 256 rumble - operate the rumble motor;
#X text 18 116 Query device information: (1) devlist - prints the list
of available devices in the console window (this is the only message
which works without having opened a device). (2) info - outputs a bitmask
of the available extensions \, such as Motion+ and Nunchuk. (3) leds
- outputs a bitmask of active leds. (4) battery - outputs the battery
status. Note that results will be shown in the main patch., f 80;
#X text 21 12 xwii [dev] -- dev is the device number (1 by default)
;
#X connect 0 0 4 0;
#X connect 1 0 4 0;
#X connect 2 0 4 0;
#X connect 3 0 4 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 8 0 11 0;
#X connect 9 0 10 0;
#X connect 10 0 8 1;
#X connect 11 0 14 0;
#X connect 12 0 13 0;
#X connect 13 0 15 0;
#X restore 267 221 pd more;
#X text 326 221 Click here for more information;
#N canvas 624 168 766 573.062 sound 0;
#X obj 21 34 r x;
#X obj 21 96 + 48;
#X floatatom 53 34 5 0 0 0 - - -, f 5;
#X obj 21 256 makenote 64 500;
#X obj 21 278 noteout 1;
#X obj 21 34 r x;
#X floatatom 53 34 5 0 0 2 transpose tx -, f 5;
#X obj 21 256 makenote 64 500;
#X obj 21 278 noteout 1;
#X obj 64 96 hsl 64 15 0 127 0 0 empty vx velocity -2 -8 0 10 -262144
-1 -1 3175 1;
#X obj 21 61 change;
#X obj 151 34 r x;
#X obj 151 96 + 48;
#X floatatom 183 34 5 0 0 0 - - -, f 5;
#X obj 151 256 makenote 64 500;
#X obj 151 278 noteout 1;
#X floatatom 183 34 5 0 0 2 transpose ty -, f 5;
#X obj 151 256 makenote 64 500;
#X obj 194 96 hsl 64 15 0 127 0 0 empty vy velocity -2 -8 0 10 -262144
-1 -1 3969 1;
#X obj 151 61 change;
#X obj 281 34 r x;
#X obj 281 96 + 48;
#X floatatom 313 34 5 0 0 0 - - -, f 5;
#X obj 281 256 makenote 64 500;
#X obj 281 278 noteout 1;
#X floatatom 313 34 5 0 0 2 transpose tz -, f 5;
#X obj 281 256 makenote 64 500;
#X obj 324 96 hsl 64 15 0 127 0 0 empty vz velocity -2 -8 0 10 -262144
-1 -1 2461 1;
#X obj 281 61 change;
#X obj 151 34 r y;
#X obj 281 34 r z;
#X obj 151 278 noteout 2;
#X obj 281 278 noteout 3;
#X obj 433 156 loadbang;
#X msg 433 178 \; tx 48 \; vx 64 \; ty 53 \; vy 80 \; tz 48 \; vz 100
;
#X floatatom 21 118 5 0 0 0 - - -, f 5;
#X floatatom 151 118 5 0 0 0 - - -, f 5;
#X floatatom 281 118 5 0 0 0 - - -, f 5;
#X text 67 310 This demonstrates how one might go about using the Motion+
location data. Here we just generate MIDI notes from the x y z data.
Note that you need to have the Motion+ sensor activated in the main
patch and a MIDI synthesizer hooked up to Pd's MIDI output to make
this work.;
#X obj 21 169 max 12;
#X obj 21 191 min 120;
#X obj 21 213 change;
#X floatatom 21 235 5 0 0 0 - - -, f 5;
#X obj 151 169 max 12;
#X obj 151 191 min 120;
#X obj 151 213 change;
#X floatatom 151 235 5 0 0 0 - - -, f 5;
#X obj 281 169 max 12;
#X obj 281 191 min 120;
#X obj 281 213 change;
#X floatatom 281 235 5 0 0 0 - - -, f 5;
#X obj 21 139 spigot;
#X obj 151 139 spigot;
#X obj 281 139 spigot;
#X obj 425 21 inlet;
#X obj 425 43 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X connect 1 0 35 0;
#X connect 2 0 1 1;
#X connect 3 0 4 0;
#X connect 3 1 4 1;
#X connect 5 0 10 0;
#X connect 7 0 8 0;
#X connect 7 1 8 1;
#X connect 9 0 7 1;
#X connect 10 0 1 0;
#X connect 12 0 36 0;
#X connect 13 0 12 1;
#X connect 14 0 15 0;
#X connect 14 1 15 1;
#X connect 17 0 31 0;
#X connect 17 1 31 1;
#X connect 18 0 17 1;
#X connect 19 0 12 0;
#X connect 21 0 37 0;
#X connect 22 0 21 1;
#X connect 23 0 24 0;
#X connect 23 1 24 1;
#X connect 26 0 32 0;
#X connect 26 1 32 1;
#X connect 27 0 26 1;
#X connect 28 0 21 0;
#X connect 29 0 19 0;
#X connect 30 0 28 0;
#X connect 33 0 34 0;
#X connect 35 0 51 0;
#X connect 36 0 52 0;
#X connect 37 0 53 0;
#X connect 39 0 40 0;
#X connect 40 0 41 0;
#X connect 41 0 42 0;
#X connect 42 0 7 0;
#X connect 43 0 44 0;
#X connect 44 0 45 0;
#X connect 45 0 46 0;
#X connect 46 0 17 0;
#X connect 47 0 48 0;
#X connect 48 0 49 0;
#X connect 49 0 50 0;
#X connect 50 0 26 0;
#X connect 51 0 39 0;
#X connect 52 0 43 0;
#X connect 53 0 47 0;
#X connect 54 0 55 0;
#X connect 55 0 51 1;
#X connect 55 0 53 1;
#X connect 55 0 52 1;
#X restore 267 197 pd sound;
#X text 326 197 MIDI sound generation from Motion+ data;
#X text 13 325 INSTRUCTIONS: (1) Open the device by clicking the red
toggle above. (2) Click the green toggle and use the box on the right
above to choose which acceleration and motion data to read. (3) Keep
the device still and push the calibrate control (or press the A button
on the Wiimote) to calibrate the Motion+ location data. Wait until
the x y z values stabilize. (4) Connect the data to some sound generator
to have fun., f 36;
#X obj 267 173 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X connect 1 0 2 0;
#X connect 2 0 59 0;
#X connect 2 1 19 0;
#X connect 5 0 6 0;
#X connect 6 0 35 0;
#X connect 7 0 3 0;
#X connect 7 1 4 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 10 1 13 0;
#X connect 11 0 12 0;
#X connect 13 0 14 0;
#X connect 17 0 2 0;
#X connect 19 0 8 0;
#X connect 19 1 9 0;
#X connect 19 2 20 0;
#X connect 19 3 31 0;
#X connect 19 4 36 0;
#X connect 20 0 25 0;
#X connect 23 0 21 0;
#X connect 24 0 22 0;
#X connect 25 0 23 0;
#X connect 25 1 24 0;
#X connect 25 2 28 0;
#X connect 25 3 29 0;
#X connect 28 0 26 0;
#X connect 29 0 27 0;
#X connect 35 0 18 0;
#X connect 36 0 37 0;
#X connect 36 1 38 0;
#X connect 36 1 56 0;
#X connect 36 2 39 0;
#X connect 36 3 51 0;
#X connect 37 0 40 0;
#X connect 37 1 41 0;
#X connect 37 2 42 0;
#X connect 38 0 43 0;
#X connect 38 1 44 0;
#X connect 38 2 45 0;
#X connect 39 0 46 0;
#X connect 39 1 47 0;
#X connect 39 2 48 0;
#X connect 51 0 49 0;
#X connect 51 1 50 0;
#X connect 52 0 56 0;
#X connect 56 0 53 0;
#X connect 56 1 54 0;
#X connect 56 2 57 0;
#X connect 58 0 56 0;
#X connect 59 0 7 0;
#X connect 59 1 64 0;
#X connect 61 0 63 0;
#X connect 62 0 58 0;
#X connect 64 0 61 0;
#X connect 71 0 68 0;
